# file		EntryPoint.s
# date		2009/01/01
# author	kkamagui 
#           Copyright(c)2008 All rights reserved by kkamagui
# brief		IA-32e ��� Ŀ�� ��Ʈ�� ����Ʈ�� ���õ� �ҽ� ����

[BITS 64]           ; ������ �ڵ�� 64��Ʈ �ڵ�� ����

SECTION .text       ; text ����(���׸�Ʈ)�� ����


; �ܺο��� ���ǵ� �Լ��� �� �� �ֵ��� ������(Import)
extern Main

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;	�ڵ� ����
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
START:
	mov ax, 0x10        ; IA-32e ��� Ŀ�ο� ������ ���׸�Ʈ ��ũ���͸� AX �������Ϳ� ����
	mov ds, ax          ; DS ���׸�Ʈ �����Ϳ� ����
	mov es, ax          ; ES ���׸�Ʈ �����Ϳ� ����
	mov fs, ax          ; FS ���׸�Ʈ �����Ϳ� ����
	mov gs, ax          ; GS ���׸�Ʈ �����Ϳ� ����
	
	; ������ 0x600000~0x6FFFFF ������ 1MB ũ��� ����
	mov ss, ax          ; SS ���׸�Ʈ �����Ϳ� ����
	mov rsp, 0x6FFFF8   ; RSP ���������� ��巹���� 0x6FFFF8�� ����
	mov rbp, 0x6FFFF8   ; RBP ���������� ��巹���� 0x6FFFF8�� ����
	
	call Main           ; C ��� ��Ʈ�� ����Ʈ �Լ�(Main) ȣ��

	
	jmp $
